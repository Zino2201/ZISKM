"use strict";(self.webpackChunkziskm=self.webpackChunkziskm||[]).push([[98],{4267:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return g},default:function(){return b},frontMatter:function(){return h},metadata:function(){return v},toc:function(){return f}});var a=n(7462),i=n(3366),o=n(7294),s=n(3905),r=n(9443);var l=function(){var e=(0,o.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},c=n(6010),d="tabItem_1uMI",m="tabItemActive_2DSg";var u=function(e){var t,n=e.lazy,a=e.block,i=e.defaultValue,s=e.values,r=e.groupId,u=e.className,p=o.Children.toArray(e.children),k=null!=s?s:p.map((function(e){return{value:e.props.value,label:e.props.label}})),h=null!=i?i:null==(t=p.find((function(e){return e.props.default})))?void 0:t.props.value,g=l(),v=g.tabGroupChoices,f=g.setTabGroupChoices,N=(0,o.useState)(h),b=N[0],w=N[1],I=[];if(null!=r){var y=v[r];null!=y&&y!==b&&k.some((function(e){return e.value===y}))&&w(y)}var C=function(e){var t=e.currentTarget,n=I.indexOf(t),a=k[n].value;w(a),null!=r&&(f(r,a),setTimeout((function(){var e,n,a,i,o,s,r,l;(e=t.getBoundingClientRect(),n=e.top,a=e.left,i=e.bottom,o=e.right,s=window,r=s.innerHeight,l=s.innerWidth,n>=0&&o<=l&&i<=r&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(m),setTimeout((function(){return t.classList.remove(m)}),2e3))}),150))},M=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=I.indexOf(e.target)+1;n=I[a]||I[0];break;case"ArrowLeft":var i=I.indexOf(e.target)-1;n=I[i]||I[I.length-1]}null==(t=n)||t.focus()};return o.createElement("div",{className:"tabs-container"},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,c.Z)("tabs",{"tabs--block":a},u)},k.map((function(e){var t=e.value,n=e.label;return o.createElement("li",{role:"tab",tabIndex:b===t?0:-1,"aria-selected":b===t,className:(0,c.Z)("tabs__item",d,{"tabs__item--active":b===t}),key:t,ref:function(e){return I.push(e)},onKeyDown:M,onFocus:C,onClick:C},null!=n?n:t)}))),n?(0,o.cloneElement)(p.filter((function(e){return e.props.value===b}))[0],{className:"margin-vert--md"}):o.createElement("div",{className:"margin-vert--md"},p.map((function(e,t){return(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==b})}))))};var p=function(e){var t=e.children,n=e.hidden,a=e.className;return o.createElement("div",{role:"tabpanel",hidden:n,className:a},t)},k=["components"],h={},g="Using UZISKMInstancedSkeletalMeshComponent",v={unversionedId:"advanced/using-ziskminstancedskelcomp",id:"advanced/using-ziskminstancedskelcomp",isDocsHomePage:!1,title:"Using UZISKMInstancedSkeletalMeshComponent",description:"Before reading this, we recommend to check Quick Start !",source:"@site/docs/advanced/using-ziskminstancedskelcomp.mdx",sourceDirName:"advanced",slug:"/advanced/using-ziskminstancedskelcomp",permalink:"/ZISKM/advanced/using-ziskminstancedskelcomp",editUrl:"https://github.com/Zino2201/ZISKM/edit/main/docs/advanced/using-ziskminstancedskelcomp.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Quick Start",permalink:"/ZISKM/getting-started/quick-start"},next:{title:"FZISKMInstance",permalink:"/ZISKM/api-reference/ziskminstance"}},f=[{value:"Introduction",id:"introduction",children:[]},{value:"How to add an instance",id:"how-to-add-an-instance",children:[]},{value:"Moving a instance",id:"moving-a-instance",children:[]},{value:"Custom Data",id:"custom-data",children:[]},{value:"Misc",id:"misc",children:[{value:"Culling",id:"culling",children:[]},{value:"Animations",id:"animations",children:[]}]}],N={toc:f};function b(e){var t=e.components,o=(0,i.Z)(e,k);return(0,s.kt)("wrapper",(0,a.Z)({},N,o,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"using-uziskminstancedskeletalmeshcomponent"},"Using UZISKMInstancedSkeletalMeshComponent"),(0,s.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"Before reading this, we recommend to check ",(0,s.kt)("a",{parentName:"p",href:"/getting-started/quick-start"},"Quick Start")," !"))),(0,s.kt)("h2",{id:"introduction"},"Introduction"),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"/ZISKM/api-reference/ziskminstancedskeletalcomponent"},(0,s.kt)("inlineCode",{parentName:"a"},"UZISKMInstancedSkeletalMeshComponent"))," allows you to use the full potential of the plugin. It is used like the ",(0,s.kt)("inlineCode",{parentName:"p"},"InstancedStaticMesh")," component of Unreal, where you work with indices to reference instances. This component allows you to integrate the plugin easily with a custom ECS (e.g ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/skypjack/entt/"},"entt"),") solution for large-scale games like RTS, City Builder or other genres."),(0,s.kt)("h2",{id:"how-to-add-an-instance"},"How to add an instance"),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"/ZISKM/api-reference/ziskminstancedskeletalcomponent#addinstance"},(0,s.kt)("inlineCode",{parentName:"a"},"AddInstance()"))," allows you to easily add an instance, returning its index for later use."),(0,s.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"Later on, you can try getting the underlying instance structure using ",(0,s.kt)("a",{parentName:"p",href:"/ZISKM/api-reference/ziskminstancedskeletalcomponent#getinstance"},(0,s.kt)("inlineCode",{parentName:"a"},"GetInstance()")),", but keep in mind that you should ",(0,s.kt)("strong",{parentName:"p"},"NEVER")," store it as the reference is unstable!"))),(0,s.kt)(u,{groupId:"lang",values:[{label:"Blueprint",value:"bp"},{label:"C++",value:"cpp"}],mdxType:"Tabs"},(0,s.kt)(p,{value:"bp",default:!0,mdxType:"TabItem"},(0,s.kt)("p",null,(0,s.kt)("img",{alt:"Add Instance",src:n(2853).Z}))),(0,s.kt)(p,{groupId:"lang",value:"cpp",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-cpp"},"  int32 Index = Component->AddInstance(FTransform(FVector(500.f, 0.f, 0.f)));\n")))),(0,s.kt)("h2",{id:"moving-a-instance"},"Moving a instance"),(0,s.kt)("p",null,"In order to move a instance, you can call ",(0,s.kt)("a",{parentName:"p",href:"/ZISKM/api-reference/ziskminstancedskeletalcomponent#updatetransform"},(0,s.kt)("inlineCode",{parentName:"a"},"UpdateTransform()")),", this will add your instance to a list of instances that need transform updates. These updates are then uploaded to the GPU at the end of the frame before rendering."),(0,s.kt)("h2",{id:"custom-data"},"Custom Data"),(0,s.kt)("p",null,"You can associate custom data using the ",(0,s.kt)("inlineCode",{parentName:"p"},"CustomData")," property of ",(0,s.kt)("a",{parentName:"p",href:"/ZISKM/api-reference/ziskminstance"},"FZISKMInstance"),". This can be used to store things like Velocity, indices or other to feed to other systems like your Anim Blueprint."),(0,s.kt)("h2",{id:"misc"},"Misc"),(0,s.kt)("h3",{id:"culling"},"Culling"),(0,s.kt)("p",null,"Culling is automatically managed by the component by default using the bounds of the Skeletal Mesh. "),(0,s.kt)("h3",{id:"animations"},"Animations"),(0,s.kt)("p",null,"Animations are automatically managed by the component, by default it create one anim blueprint per instance."),(0,s.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"Your Anim Blueprint must derive from ",(0,s.kt)("inlineCode",{parentName:"p"},"UZISKMAnimInstance")," to function properly!"))),(0,s.kt)("h4",{id:"accessing-instance-index--component"},"Accessing instance index & component"),(0,s.kt)("p",null,"A ",(0,s.kt)("inlineCode",{parentName:"p"},"UZISKMAnimInstance"),"-derived AnimBP allows you to get the current instance index & component. You can then from there access data like transform or other."),(0,s.kt)("p",null,(0,s.kt)("img",{src:n(6976).Z})),(0,s.kt)("h4",{id:"ticking-rate--optimization"},"Ticking Rate & optimization"),(0,s.kt)("p",null,"Anim Blueprints are only ticked when theirs associed instance are visible, additional optimization is also used to reduce ticking for instances faraway using LODs. Ensure that you have properly configured LODs in order for the plugin to function correctly."))}b.isMDXComponent=!0},2853:function(e,t,n){t.Z=n.p+"assets/images/1-addinstance-7972f467f27444c4e7754625fee19b1b.png"},6976:function(e,t,n){t.Z=n.p+"assets/images/2-animbp-436965073c809ffa200b5f222d0ab658.png"}}]);